package ProduttoriConsumatori;

import java.util.ArrayList;

public class Buffer<T> {
	private static int size = 1;
	private int currentCapacity = 0;
	ArrayList<T> buf;

	public Buffer(int s) {
		size = s;
		buf = new ArrayList<T>(s);

	}

//	public boolean insert(int pos, T data) throws IndexOutOfBoundsException{
//		if( pos < 0 || pos > size )
//				throw new IndexOutOfBoundsException();
//		// scrivo solo se la cella e null, ovvero se il posto e libero
//		if( buf.get(pos) != null )
//			return false;
//		buf.add(pos, data);
//		return true;
//	}
	public synchronized void insert(T data) throws InterruptedException {
		if (currentCapacity == size)
			wait();
		buf.add(currentCapacity, data);
		currentCapacity++;
		notify();
	}
	public synchronized T get() throws InterruptedException{
		T value = null;
		
		if(currentCapacity == 0)
			wait();
		
		return value;
	}
}
